<div class="summary-hero">
  <div class="header">
    <div class="month-controls">
      <button
        type="button"
        class="month-nav-btn"
        (click)="previousMonth.emit()"
        aria-label="View previous month">
        <mat-icon>chevron_left</mat-icon>
      </button>
      <h2>{{ monthName() }}</h2>
      @if (canGoToNextMonth()) {
        <button
          type="button"
          class="month-nav-btn"
          (click)="nextMonth.emit()"
          aria-label="View next month">
          <mat-icon>chevron_right</mat-icon>
        </button>
      } @else {
        <span class="month-nav-spacer" aria-hidden="true"></span>
      }
    </div>
    <div class="action-buttons">
      <button
        mat-stroked-button
        type="button"
        class="action-btn customize-btn"
        (click)="customize.emit()"
        title="Open settings"
        aria-label="Open settings">
        <mat-icon>settings</mat-icon>
        <span class="btn-label">Settings</span>
      </button>
      <button
        mat-stroked-button
        type="button"
        class="action-btn logout-btn"
        (click)="logout.emit()"
        title="Logout"
        aria-label="Logout">
        <mat-icon>logout</mat-icon>
        <span class="btn-label">Logout</span>
      </button>
    </div>
  </div>

  <div class="budget-bars">
    @for (section of budgetSections(); track section.title) {
      <div class="budget-section">
        <div class="section-header">
          <h3>{{ section.title }}</h3>
        </div>

        <div class="progress-bars">
          <app-progress-bar
            variant="hero"
            [spentPercent]="section.spentPercent"
            [projectedPercent]="section.projectedPercent"
            [monthProgressPercent]="monthProgressPercent()">
          </app-progress-bar>
        </div>

        <div class="metrics">
          <div class="metric">
            <span class="metric-label">{{ section.spentLabel }}</span>
            <span class="metric-value">{{ section.spentFormatted }}</span>
          </div>
          <div class="metric">
            <span class="metric-label">Upcoming</span>
            <span class="metric-value">{{ section.upcomingFormatted }}</span>
          </div>
          <div class="metric">
            <span class="metric-label">Remaining</span>
            <span
              class="metric-value highlight"
              [class.negative]="section.remaining < 0">
              {{ section.remainingFormatted }}
            </span>
          </div>
        </div>
      </div>
    }
  </div>
</div>
